---
page_title: "ONTAP: NFS Service"
subcategory: "NAS"
description: |-
  Create/Modify/Delete an NFS Configuration of a SVM.
---

# Resource NFS Service

Create/Modify/Delete an NFS Configuration of a SVM.

### Related ONTAP commands
* vserver nfs create
* vserver nfs modify
* vserver nfs delete

## Supported Platforms
* On-perm ONTAP system 9.6 or higher
* Amazon FSx for NetApp ONTAP

## Example Usage

```terraform
# Create a new NFS service that is enabled with NFSv3 disabled, NFSv4 enabled, with ACL enabled. 
resource "netapp-ontap_protocols_nfs_service_resource" "protocols_nfs_service" {
  # required to know which system to interface with
  cx_profile_name = "cluster2"
  svm_name = "ansibleSVM"
  enabled = true
  protocol = {
    v3_enabled = false
    v40_enabled = true
    v40_features = {
      acl_enabled = true
    }
  }
}
```


<!-- schema generated by tfplugindocs -->
## Argument Reference

### Required

- `cx_profile_name` (String) Connection profile name
- `svm_name` (String) IPInterface svm name
- `protocol` (Attributes) Protocol (see [below for nested schema](#nestedatt--protocol))

### Optional

- `enabled` (Boolean) NFS should be enabled or disabled
- `root` (Attributes) Specific Root user options (see [below for nested schema](#nestedatt--root))
- `security` (Attributes) NFS Security options (see [below for nested schema](#nestedatt--security))
- `showmount_enabled` (Boolean) Whether SVM allows showmount
- `transport` (Attributes) (see [below for nested schema](#nestedatt--transport))
- `vstorage_enabled` (Boolean) Whether Vstorage is enabled
- `windows` (Attributes) (see [below for nested schema](#nestedatt--windows))

### Read-Only

- `id` (String) The ID of this resource.

~> **NOTE:** `root`, `secrutiy`, `windows` requires ONTAP 9.11 or higher

<a id="nestedatt--protocol"></a>
### Nested Schema for `protocol`

Optional:

- `v3_enabled` (Boolean) NFSv3 enabled
- `v40_enabled` (Boolean) NFSv4.0 enabled
- `v40_features` (Attributes) NFSv4.0 features (see [below for nested schema](#nestedatt--protocol--v40_features))
- `v41_enabled` (Boolean) NFSv4.1 enabled
- `v41_features` (Attributes) NFSv4.1 features (see [below for nested schema](#nestedatt--protocol--v41_features))
- `v4_id_domain` (String) User ID domain for NFSv4

<a id="nestedatt--protocol--v40_features"></a>
### Nested Schema for `protocol.v40_features`

Optional:

- `acl_enabled` (Boolean) Enable ACL for NFSv4.0
- `read_delegation_enabled` (Boolean) Enable Read File Delegation for NFSv4.0
- `write_delegation_enabled` (Boolean) Enable Write File Delegation for NFSv4.0


<a id="nestedatt--protocol--v41_features"></a>
### Nested Schema for `protocol.v41_features`

Optional:

- `acl_enabled` (Boolean) Enable ACL for NFSv4.1
- `pnfs_enabled` (Boolean) Enabled pNFS (parallel NFS) for NFSv4.1
- `read_delegation_enabled` (Boolean) Enable Read File Delegation for NFSv4.1
- `write_delegation_enabled` (Boolean) Enable Write File Delegation for NFSv4.1



<a id="nestedatt--root"></a>
### Nested Schema for `root`

Optional:

- `ignore_nt_acl` (Boolean) Ignore NTFS ACL for root user
- `skip_write_permission_check` (Boolean) Skip write permissions check for root user


<a id="nestedatt--security"></a>
### Nested Schema for `security`

Optional:

- `chown_mode` (String) Specifies whether file ownership can be changed only by the superuser, or if a non-root user can also change file ownership
- `nt_acl_display_permission` (Boolean) Controls the permissions that are displayed to NFSv3 and NFSv4 clients on a file or directory that has an NT ACL set
- `ntfs_unix_security` (String) Specifies how NFSv3 security changes affect NTFS volumes
- `rpcsec_context_idle` (Number) Specifies, in seconds, the amount of time a RPCSEC_GSS context is permitted to remain unused before it is deleted


<a id="nestedatt--transport"></a>
### Nested Schema for `transport`

Optional:

- `tcp_enabled` (Boolean) tcp enabled
- `tcp_max_transfer_size` (Number) Max tcp transfer size
- `udp_enabled` (Boolean) udp enabled

~> **NOTE:** `tcp_max_transfer_size` requires ONTAP 9.11 or higher

<a id="nestedatt--windows"></a>
### Nested Schema for `windows`

Optional:

- `default_user` (String) default Windows user for the NFS server
- `map_unknown_uid_to_default_user` (Boolean) whether or not the mapping of an unknown UID to the default Windows user is enabled
- `v3_ms_dos_client_enabled` (Boolean) if permission checks are to be skipped for NFS WRITE calls from root/owner.

## Import
This resource supports import, which allows you to import existing NFS services into the state.
Import require a unique ID composed of the SVM name and the connection profile, separated by a comma.

id = `svm_name`,`cx_profile_name`

### Terraform Import

For example
```shell
 terraform import netapp-ontap_protocols_nfs_service_resource.example ansibleSVM,cluster4
```
!> The terraform import CLI command can only import resources into the state. Importing via the CLI does not generate configuration. If you want to generate the accompanying configuration for imported resources, use the import block instead.

### Terrafomr Import Block
This requires Terraform 1.5 or higher, and will auto create the configuration for you

First create the block
```terraform
import {
  to = netapp-ontap_protocols_nfs_service_resource.nfs_import
  id = "ansibleSVM,cluster4"
}
```
Next run, this will auto create the configuration for you
```shell
terraform plan -generate-config-out=generated.tf
```
This will generate a file called generated.tf, which will contain the configuration for the imported resource
```terraform
# __generated__ by Terraform
# Please review these resources and move them into your main configuration files.

# __generated__ by Terraform from "ansibleSVM,cluster4"
resource "netapp-ontap_protocols_nfs_service_resource" "nfs_import" {
  cx_profile_name = "cluster4"
  enabled         = true
  protocol = {
    v3_enabled  = true
    v40_enabled = true
    v40_features = {
      acl_enabled              = false
      read_delegation_enabled  = false
      write_delegation_enabled = false
    }
    v41_enabled = true
    v41_features = {
      acl_enabled              = false
      pnfs_enabled             = false
      read_delegation_enabled  = false
      write_delegation_enabled = false
    }
    v4_id_domain = "defaultv4iddomain.com"
  }
  root = {
    ignore_nt_acl               = false
    skip_write_permission_check = false
  }
  security = {
    chown_mode                = "use_export_policy"
    nt_acl_display_permission = false
    ntfs_unix_security        = "use_export_policy"
    rpcsec_context_idle       = 0
  }
  showmount_enabled = false
  svm_name          = "ansibleSVM"
  transport = {
    tcp_enabled           = true
    tcp_max_transfer_size = 65536
    udp_enabled           = true
  }
  vstorage_enabled = false
  windows = {
    default_user                    = null
    map_unknown_uid_to_default_user = true
    v3_ms_dos_client_enabled        = false
  }
}

```
