---
page_title: "ONTAP: Snapshot Policy"
subcategory: "Storage"
description: |-
  SnapshotPolicy resource
---

# Resource Snapshot Policy

Create/Modify/Delete a SnapshotPolicy resource

### Related ONTAP commands
* snapshot policy create
* snapshot policy modify
* snapshot policy delete

## Supported Platforms
* On-perm ONTAP system 9.6 or higher
* Amazon FSx for NetApp ONTAP

## Example Usage

```terraform
# Create a storage snapshot policy
resource "netapp-ontap_storage_snapshot_policy_resource" "storage_snapshot_policy" {
  # required to know which system to interface with
  cx_profile_name = "cluster4"
  name = "testsnapshotpolicy"
  svm_name = "ansibleSVM"
  comment = "Test for terraform snapshot policy resource"
  enabled = false
  copies = [
    {
      count = 2
      schedule = {
        name = "weekly"
      }
    },
    {
      count = 4
      schedule = {
        name = "hourly"
      }
    },
  ]
}
```

<!-- schema generated by tfplugindocs -->
## Argument Reference

### Required

- `copies` (Attributes Set) Snapshot copy (see [below for nested schema](#nestedatt--copies))
- `cx_profile_name` (String) Connection profile name
- `name` (String) SnapshotPolicy name

### Optional

- `comment` (String) A comment associated with the Snapshot copy policy
- `enabled` (Boolean) Is the Snapshot copy policy enabled?
- `svm_name` (String) SnapshotPolicy svm name

### Read-Only

- `id` (String) SnapshotPolicy UUID

<a id="nestedatt--copies"></a>
### Nested Schema for `copies`

Required:

- `count` (Number) The number of Snapshot copies to maintain for this schedule
- `schedule` (Attributes) Schedule at which Snapshot copies are captured on the volume (see [below for nested schema](#nestedatt--copies--schedule))

Optional:

- `prefix` (String) The prefix to use while creating Snapshot copies at regular intervals
- `retention_period` (String) The retention period of Snapshot copies for this schedule
- `snapmirror_label` (String) Label for SnapMirror operations

<a id="nestedatt--copies--schedule"></a>
### Nested Schema for `copies.schedule`

Required:

- `name` (String) Some common schedules already defined in the system are hourly, daily, weekly, at 15 minute intervals, and at 5 minute intervals. Snapshot copy policies with custom schedules can be referenced

## Import
 This Resource supports import, which allows you to import existing storage snapshot policy into the state of this resoruce.
 Import require a unique ID composed of the snapshot policy name, svm_name and cx_profile_name, separated by a comma.
 id = `name`,`svm_name`,`cx_profile_name`
### Terraform Import
For example
 ```shell
  terraform import netapp-ontap_storage_snapshot_policy_resource.example policy1,svm1,cluster4
 ```

!> The terraform import CLI command can only import resources into the state. Importing via the CLI does not generate configuration. If you want to generate the accompanying configuration for imported resources, use the import block instead.

### Terrafomr Import Block
This requires Terraform 1.5 or higher, and will auto create the configuration for you

First create the block
```terraform
import {
  to = netapp-ontap_storage_snapshot_policy_resource.exp_import
  id = "policy1,svm1,cluster4"
}
```
Next run, this will auto create the configuration for you
```shell
terraform plan -generate-config-out=generated.tf
```
This will generate a file called generated.tf, which will contain the configuration for the imported resource
```terraform
# __generated__ by Terraform
# Please review these resources and move them into your main configuration files.
# __generated__ by Terraform from "policy1,svm1,cluster4"
resource "netapp-ontap_storage_snapshot_policy_resource" "policy1_import" {
  cx_profile_name = "cluster4"
  name       = "policy1"
  svm_name   = "svm1"
}
```

