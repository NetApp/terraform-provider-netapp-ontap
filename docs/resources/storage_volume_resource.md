---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "ONTAP: Volume"
subcategory: "Storage"
description: |-
  Volume resource
---

# netapp-ontap_volume (Resource)

Create/modify/delete a Volume resource

### Related ONTAP commands
```commandline
* volume create
* volume modify
* volume delete
```

## Supported Platforms
* On-perm ONTAP system 9.6 or higher
* Amazon FSx for NetApp ONTAP

[comment]: <> (TODO: Add support for Amazon FSx for NetApp ONTAP )

## Example Usage

```terraform
resource "netapp-ontap_volume" "example" {
  cx_profile_name = "cluster5"
  name = "vol1"
  svm_name = "svm2"
  aggregates = [
    {
      name = "aggr2"
    },
  ]
  space_guarantee = "none"
  snapshot_policy = "default-1weekly"
  encryption = true
  snaplock = {
    type = "non_snaplock"
  }
  space = {
	  size = 30
	  size_unit = "mb"
	  percent_snapshot_space = 20
    logical_space = {
      enforcement = true
      reporting = true
    }
  }
  tiering = {
  	policy_name = "all"
  }
  nas = {
    export_policy_name = "test"
    group_id = 10
    user_id = 20
    unix_permissions = "755"
    security_style = "mixed"
	  junction_path = "/testacc"
  }
}
```

<!-- schema generated by tfplugindocs -->
## Argument Reference

### Required

- `aggregates` (Attributes List) Aggregates the volume is on (see [below for nested schema](#nestedatt--aggregates))
- `cx_profile_name` (String) Connection profile name
- `name` (String) The name of the volume to manage
- `space` (Attributes) (see [below for nested schema](#nestedatt--space))
- `svm_name` (String) Name of the svm to use

### Optional

- `analytics` (Attributes) (see [below for nested schema](#nestedatt--analytics))
- `comment` (String) Sets a comment associated with the volume
- `efficiency` (Attributes) (see [below for nested schema](#nestedatt--efficiency))
- `encryption` (Boolean) Whether or not to enable Volume Encryption
- `language` (String) Language to use for volume
- `nas` (Attributes) (see [below for nested schema](#nestedatt--nas))
- `qos_policy_group` (String) Specifies a QoS policy group to be set on volume
- `snaplock` (Attributes) (see [below for nested schema](#nestedatt--snaplock))
- `snapshot_policy` (String) The name of the snapshot policy
- `space_guarantee` (String) Space guarantee style for the volume
- `state` (String) Whether the specified volume is online, or not
- `tiering` (Attributes) (see [below for nested schema](#nestedatt--tiering))
- `type` (String) The volume type, either read-write (RW) or data-protection (DP)

### Read-Only

- `id` (String) Volume identifier

<a id="nestedatt--aggregates"></a>
### Nested Schema for `aggregates`

Required:

- `name` (String) Name of the Aggregate
- 
<a id="nestedatt--space"></a>
### Nested Schema for `space`

Required:

- `size` (Number) The size of the volume
- `size_unit` (String) The unit used to interpret the size parameter

Optional:

- `logical_space` (Attributes) (see [below for nested schema](#nestedatt--space--logical_space))
- `percent_snapshot_space` (Number) Amount of space reserved for snapshot copies of the volume

<a id="nestedatt--space--logical_space"></a>
### Nested Schema for `space.logical_space`

Optional:

- `enforcement` (Boolean) Whether to perform logical space accounting on the volume
- `reporting` (Boolean) Whether to report space logically



<a id="nestedatt--analytics"></a>
### Nested Schema for `analytics`

Optional:

- `state` (String) Set file system analytics state of the volume


<a id="nestedatt--efficiency"></a>
### Nested Schema for `efficiency`

Optional:

- `compression` (String) Whether to enable compression for the volume (HDD and Flash Pool aggregates)
- `policy_name` (String) Allows a storage efficiency policy to be set on volume creation


<a id="nestedatt--nas"></a>
### Nested Schema for `nas`

Optional:

- `export_policy_name` (String) The name of the export policy
- `group_id` (Number) The UNIX group ID for the volume
- `junction_path` (String) Junction path of the volume
- `security_style` (String) The security style associated to the volume
- `unix_permissions` (Number) Unix permission bits in octal or symbolic format. For example, 0 is equivalent to ------------, 777 is equivalent to ---rwxrwxrwx,both formats are accepted
- `user_id` (Number) The UNIX user ID for the volume


<a id="nestedatt--snaplock"></a>
### Nested Schema for `snaplock`

Optional:

- `type` (String) The SnapLock type of the volume


<a id="nestedatt--tiering"></a>
### Nested Schema for `tiering`

Optional:

- `minimum_cooling_days` (Number) Determines how many days must pass before inactive data in a volume using the Auto or Snapshot-Only policy is considered cold and eligible for tiering
- `policy_name` (String) The tiering policy that is to be associated with the volume

## Import
This resource supports import, which allows you to import existing volumes into the state of this resource.
Import require a unique ID composed of the volume name, the SVM name, and connection profile, separated by a comma.

id = `name`,`svm_name`,`cx_profile_name`

### Terraform Import

For example
```shell
 terraform import netapp-ontap_volume.example vol1,svm2,cluster5
```
!> The terraform import CLI command can only import resources into the state. Importing via the CLI does not generate configuration. If you want to generate the accompanying configuration for imported resources, use the import block instead.

### Terraform Import Block
This requires Terraform 1.5 or higher, and will auto create the configuration for you

First create the block
```terraform
import {
  to = netapp-ontap_volume.volume_import
  id = "svm1_root,svm1,cluster4"
}
```
Next run, this will auto create the configuration for you
```shell
terraform plan -generate-config-out=generated.tf
```
This will generate a file called generated.tf, which will contain the configuration for the imported resource
```terraform
# __generated__ by Terraform
# Please review these resources and move them into your main configuration files.

# __generated__ by Terraform from "svm1_root,svm1,cluster4"
resource "netapp-ontap_volume" "volume_import" {
  aggregates = [
    {
      name = "aggr1"
    },
  ]
  analytics = {
    state = "off"
  }
  comment         = null
  cx_profile_name = "cluster4"
  efficiency = {
    compression = "none"
    policy_name = "-"
  }
  encryption = false
  language   = "c.utf_8"
  name       = "svm1_root"
  nas = {
    export_policy_name = "default"
    group_id           = 0
    junction_path      = "/"
    security_style     = "unix"
    unix_permissions   = 755
    user_id            = 0
  }
  qos_policy_group = null
  snaplock = {
    type = "non_snaplock"
  }
  snapshot_policy = "default"
  space = {
    logical_space = {
      enforcement = false
      reporting   = false
    }
    percent_snapshot_space = 5
    size                   = 20
    size_unit              = "mb"
  }
  space_guarantee = "volume"
  state           = "online"
  svm_name        = "svm1"
  tiering = {
    minimum_cooling_days = 0
    policy_name          = "none"
  }
  type = "rw"
}
```